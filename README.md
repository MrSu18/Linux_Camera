# Linux_Camera
## 摄像头设备是哪个
`ls /dev/video*`这个可以显示摄像头设备节点，你先拔了摄像头看看，然后再插上看看多出哪个。
- 在此记录自己PC的 /dev/video0是笔记本自带的摄像头，如果摄像头插在左边的USB上是/dev/video2
- 在我的imx6null上是/dev/vido1

## 命名规范
- 函数名：驼峰法
- 枚举类型：驼峰法
- 枚举值：k+驼峰法
- 结构体：驼峰法
- 变量，局部变量，全局变量，结构体变量：小写下划线
- 宏/常量：大写下划线

## 框架设计思路
### camera
- camera_manager
  1.  Q: 为什么不把CameraBuf放到CameraDevice里面?
  - A: 为了灵活性和后续项目的扩展性.
    -  合并一起设计虽然比较符合直觉认为一个设备就带着一个缓冲帧,但是它的的**灵活性较低**,比较适用于单一格式输出的简单嵌入式设备,比如对图像帧的处理一直都是RGB565,没多级处理的流水线,比如不需要同时给显示和编码模提供不同格式. 
    -  而分离设计,可以让两个结构体的职责更加的分离且灵活性更高,比如同一个device可以输出多个格式的buf,这样不需要频繁的转换格式,需要用哪个的时候就选哪个就好,**一个device可以有多个buf**.
   2.  Q: 为什么device中的`unsigned char *mmap_buffers[BUFFER_NUM];`使用指针数组`*buf[]`而不是二级指针`**buf`
   -  A: 指针数组更高效灵活,虽然只能静态开辟缓冲区,但是一般后续不需要修改缓冲区的个数,尽管在申请缓冲区的时候如果没办法申请那么多,驱动会给小于NUM的个数,会有内存浪费但是实时分配的访问效率低,需要先取指针数组地址再取缓冲区地址,且管理复杂需要`free`
   3.  Q: 为什么摄像头的成员函数不跟C++的一样合并在摄像头device结构体里面,而是采用一个指针分离呢?
   - A: 为了项目的扩展性,考虑到未来可能会支持其他新的驱动摄像头(不仅V4L2驱动的摄像头),且资源不是极度受限(一个指针的内存开销都要节省); 并且后续设备变多,内存的占用会低,因为是共享操作集,而合并在一起的每个实例都需要冗余存储函数指针.


